<!-- views/post.handlebars -->
<article>
    <h1>{{post.title}}</h1>
    <p>By {{post.user.username}} on {{post.createdAt}}</p>
    <p>{{post.content}}</p>
</article>

<section>
    <h2>Comments</h2>
    {{#each post.comments}}
        <div>
            <p><strong>{{this.user.username}}:</strong> {{this.comment_text}} ({{this.createdAt}})</p>
        </div>
    {{else}}
        <p>No comments yet.</p>
    {{/each}}

    {{#if logged_in}}
    <form action="/comments" method="POST">
        <textarea name="comment_text" required></textarea>
        <input type="hidden" name="post_id" value="{{post.id}}">
        <button type="submit">Add Comment</button>
    </form>
    {{else}}
    <p><a href="/login">Log in</a> to leave a comment.</p>
    {{/if}}
</section>
